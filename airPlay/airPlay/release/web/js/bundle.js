!function(){"use strict";class e extends Laya.Script{constructor(){super(),this._time=0,this.startFlag=!1,this.zdFlage=!1,this.startGame=!1,this.createBoxInterval=1e3,this.fsNum=0,e.instance=this,Laya.MouseManager.multiTouchEnabled=!1}onEnable(){this._time=Date.now(),this._gameBox=this.owner.getChildByName("gameBox")}onDisable(){}stopGame(){this.startGame=!1,this.owner.getChildByName("end").visible=!0}createBox(){let e=Laya.Pool.getItemByCreateFun("dropBox",this.dropBox.create,this.dropBox);e.pos(Math.random()*(Laya.stage.width-100),-100),this._gameBox.addChild(e)}onStart(){this.startImg.on(Laya.Event.CLICK,this,function(){this.startGame=!0,this.startImg.visible=!1,this.player.visible=!0,this.fs.visible=!0,this.player.pos(Laya.stage.width/2,Laya.stage.height-this.player.height);let e=Date.now();e-this._time>this.createBoxInterval&&this._started&&(this._time=e,this.createBox())}),this.player.on(Laya.Event.MOUSE_MOVE,this,this.onClickPlayer),Laya.timer.loop(300,this,function(){if(this.startGame){let e=Laya.Pool.getItemByCreateFun("bullet",this.bullet.create,this.bullet);this.zd=e,this.startFlag&&this.zdFlage?e.pos(Laya.stage.mouseX-e.width/2,Laya.stage.mouseY):e.pos(this.player.x-e.width/2,this.player.y-e.height),this._gameBox.addChild(e),this.player.on(Laya.Event.MOUSE_UP,this,function(){this.zdFlage=!1})}})}onUpdate(){let e=Date.now();e-this._time>this.createBoxInterval&&this.startGame&&(this._time=e,this.createBox())}onClickPlayer(){this.startFlag&&(this.zdFlage=!0,this.player.pos(Laya.stage.mouseX,Laya.stage.mouseY))}onStageMouseMove(){this.startFlag=!0}onStageClick(e){}}class t extends Laya.Script{constructor(){super(),this.level=1,this.num=0,this.fxNum=0}onEnable(){this._rig=this.owner.getComponent(Laya.RigidBody),this.fs=this.owner.parent.parent.getChildByName("fs"),this.num=2}onUpdate(){this.owner.rotation++}onTriggerEnter(t,a,s){var i=this.owner;let o=this.owner;if("zd"===t.label)if(this.num>1){this.num--;o.loadImage("./res/ys.png");i.getComponent(Laya.RigidBody).setVelocity({x:0,y:-10})}else{let t=Laya.Pool.getItemByCreateFun("effect",this.createEffect,this);t.pos(i.x,i.y),i.parent.addChild(t),t.play(0,!0),i.removeSelf(),console.log(this.fs);let a=this.fs.getChildByName("fs_lable");e.instance.fsNum+=1,a.changeText(e.instance.fsNum+"")}else"ground"===t.label&&(i.removeSelf(),e.instance.stopGame())}createEffect(){let e=new Laya.Animation;return e.loadAnimation("bzdx.ani"),e.on(Laya.Event.COMPLETE,null,function(){e.removeSelf(),Laya.Pool.recover("effect",e)}),e}onDisable(){this.owner.loadImage("./res/ys1.png"),Laya.Pool.recover("dropBox",this.owner)}}class a extends Laya.Script{constructor(){super()}onEnable(){this.owner.getComponent(Laya.RigidBody).setVelocity({x:0,y:-10})}onTriggerEnter(e,t,a){this.owner.removeSelf()}onUpdate(){this.owner.y<-10&&this.owner.removeSelf()}onDisable(){Laya.Pool.recover("bullet",this.owner)}}class s{constructor(){}static init(){var s=Laya.ClassUtils.regClass;s("script/gameControl.ts",e),s("script/ys.ts",t),s("script/zd.ts",a)}}s.width=640,s.height=1136,s.scaleMode="fixedwidth",s.screenMode="none",s.alignV="top",s.alignH="left",s.startScene="main.scene",s.sceneRoot="",s.debug=!1,s.stat=!1,s.physicsDebug=!1,s.exportSceneToJson=!0,s.init();new class{constructor(){window.Laya3D?Laya3D.init(s.width,s.height):Laya.init(s.width,s.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=s.scaleMode,Laya.stage.screenMode=s.screenMode,Laya.stage.alignV=s.alignV,Laya.stage.alignH=s.alignH,Laya.URL.exportSceneToJson=s.exportSceneToJson,(s.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),s.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),s.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){s.startScene&&Laya.Scene.open(s.startScene)}}}();